fps = 20  # Framerate of the dataset
dataset_root = "./data" # Root for the dataset storage

visualize = true # Whether to visualize the data in Rerun or not
rerun_remote = "rerun+http://172.17.0.1:9876/proxy" # Rerun remote server address

# Here you define the topics that will be recorded in the dataset and are available to a policy
[topics]

# The SO101 leader publisher publishes joint states on this topic
[topics."/so101_leader/joint_states"]
msg_type = "JointState"

# Optional Quality of Service settings for the topic
qos = { history = "keep_last", depth = 10, reliability = "reliable", durability = "volatile" }

# is_action indicates that this topic should be generated by a policy
is_action = true

# Give the joints proper names
joints = [
    "shoulder_pan",
    "shoulder_lift",
    "elbow_flex",
    "wrist_flex",
    "wrist_roll",
    "gripper",
]

# JointState has position, velocity and effort, but only position is used by the SO101 publisher
position = true
velocity = false
effort = false

# The SO101 follower uses this for the recorded joint states
[topics."/so101_follower/joint_states"]
msg_type = "JointState"
qos = { history = "keep_last", depth = 10, reliability = "reliable", durability = "volatile" }
joints = [
    "shoulder_pan",
    "shoulder_lift",
    "elbow_flex",
    "wrist_flex",
    "wrist_roll",
    "gripper",
]
position = true
velocity = false
effort = false


# Add your camera topics here
[topics."/base/image_raw"]
msg_type = "Image"
# You could also use CompressedImage here
# msg_type = "CompressedImage"
qos = { reliability = "reliable", durability = "volatile", depth = 10, history = "keep_last" }

# These parameters are used to resize the images
# The can differ from the actual image size published by the camera
height = 360
width = 640
channels = 3

key = "base"

[topics."/gripper/image_raw"]
msg_type = "Image"
qos = { reliability = "reliable", durability = "volatile", depth = 1, history = "keep_last" }

height = 360
width = 640
channels = 3

key = "gripper"

# You can also specify image transformations here
rotate = 0

[policies]

# Define the policies that will be used to generate actions

[policies."pickup"]
# Either a Huggingface repo or a local path to a pretrained model
pretrained_name_or_path = "fhnwrover/so101-ros-red-ring-act-v2"

# The repository used for training is required to load statistcs and configure the policy
ds_repo_id = "fhnwrover/so101-ros-red-ring-all"

# You can choose between "cpu" and "cuda" here
device = "cpu"

# Pass additional configuration to the policy here
policy_config = { n_action_steps = 50 }

# Smoothing and action queue settings
action_queue_size = 25
# Beta = 0: Linear smoothing between new and old actions
# Beta > 0: More weight to newer actions 
# Beta < 0: More weight to older actions
action_smoothing_beta = 0.5

